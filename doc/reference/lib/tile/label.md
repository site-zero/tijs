# TiLabel 控件参考文档

## 1. 控件概述

TiLabel 是一个灵活的标签显示控件，用于在界面中展示文本、值或链接。该控件设计用于各种场景下的文本展示需求，特别适合于数据展示、信息标识、状态指示等场景。

### 设计意图
- 提供简洁美观的文本显示方式
- 支持丰富的样式定制，包括字体大小、边距、圆角等
- 支持前缀和后缀图标，增强视觉表现力
- 集成点击复制功能，提升用户体验
- 支持超链接功能，方便跳转到相关资源
- 支持与字典数据结合，实现数据的语义化显示

## 2. 控件接受的属性

### 基础属性

#### value
- **类型**: `any`
- **默认值**: - 
- **说明**: 标签的实际值。这是 TiLabel 控件的核心数据，用于显示在界面上的内容。
  - 为什么需要这个属性：作为标签的主要数据源，用于展示实际内容
  - 可能的值：可以是任何 JavaScript 数据类型，包括字符串、数字、布尔值等
  - 边界情况：当值为 null 或 undefined 时，将显示占位符文本（如果设置了 placeholder）
  - 与其他属性的关系：该值会经过 valuePipe 处理，并可能通过 dict 映射为显示文本

#### tip
- **类型**: `string`
- **默认值**: - 
- **说明**: 标签的提示信息。当鼠标悬停在标签上时显示的 tooltip 文本。
  - 为什么需要这个属性：为用户提供额外的上下文信息，增强用户体验
  - 可能的值：任何字符串文本
  - 特殊情况：如果 autoI18n 为 true，该值会自动进行国际化翻译

#### href
- **类型**: `string | ((ctx: Vars) => string)`
- **默认值**: - 
- **说明**: 超链接地址或生成超链接的函数。用于将标签转换为可点击的链接。
  - 为什么需要这个属性：允许标签作为导航元素，链接到其他页面或资源
  - 可能的值：
    - 字符串：直接指定的 URL 地址
    - 函数：接收上下文对象并返回 URL 字符串的函数
  - 使用示例：当设置为字符串时，如 `"https://example.com"`，标签将链接到该地址；当设置为函数时，可以动态生成链接
  - 与 vars 属性的配合：如果 href 中包含模板变量（如 `"/users/{id}"`），则会使用 vars 对象中的值进行替换

#### vars
- **类型**: `Vars`
- **默认值**: - 
- **说明**: 渲染超链接的上下文对象，其中 value 键会被控件的 value 属性值自动替换。
  - 为什么需要这个属性：提供模板变量替换的数据源，使 href 可以动态生成
  - 可能的值：包含键值对的 JavaScript 对象
  - 特殊处理：对象中的 value 键会被控件的当前 value 属性覆盖
  - 使用场景：当需要在链接中包含多个动态参数时特别有用

#### captureClick
- **类型**: `boolean`
- **默认值**: false 
- **说明**: 是否捕获点击事件。设置为 true 会阻止事件冒泡到父组件。
  - 为什么需要这个属性：在复杂的嵌套组件结构中，可以精确控制点击事件的传播
  - 可能的值：true 或 false
  - 使用场景：当标签位于可点击的父元素内，且需要独立处理标签的点击事件时

#### clickable
- **类型**: `boolean`
- **默认值**: - 
- **说明**: 是否可点击。设置后会改变标签的鼠标样式和交互行为。
  - 为什么需要这个属性：提供视觉反馈，表明标签是可交互的
  - 可能的值：true 或 false
  - 与其他属性的关系：如果设置了 href，则 clickable 会自动设置为 true

#### nowrap
- **类型**: `boolean`
- **默认值**: true 
- **说明**: 是否不换行显示文本。控制文本在超出容器宽度时的行为。
  - 为什么需要这个属性：允许开发者控制文本的布局方式，适应不同的显示需求
  - 可能的值：true（不换行，文本会被截断或显示省略号）或 false（自动换行）
  - 使用场景：在空间有限的界面中，可能需要保持标签的固定宽度和单行显示

#### disable
- **类型**: `boolean`
- **默认值**: false 
- **说明**: 是否禁用控件。禁用后标签将不可交互，并显示禁用状态的样式。
  - 为什么需要这个属性：在特定条件下临时禁止用户与标签交互
  - 可能的值：true 或 false
  - 影响范围：会禁用所有交互功能，包括点击、复制等

#### autoI18n
- **类型**: `boolean`
- **默认值**: true 
- **说明**: 是否自动进行国际化翻译。控制标签的文本内容是否需要翻译。
  - 为什么需要这个属性：方便应用的国际化支持
  - 可能的值：true（自动翻译）或 false（不翻译）
  - 影响范围：会影响 value、tip 和 placeholder 等文本属性

### 外观属性

#### boxFontSize
- **类型**: `AspectSize`
- **默认值**: "s" 
- **说明**: 标签的字体大小。控制标签文本的显示尺寸。
  - 为什么需要这个属性：适应不同界面的视觉层次和可读性需求
  - 可能的值：预定义的尺寸字符串，如 "xs"、"s"、"m"、"l"、"xl" 等
  - 设计考量：不同尺寸对应不同的字体大小，确保在各种场景下的可读性

#### boxPadding
- **类型**: `AspectSize`
- **默认值**: "s" 
- **说明**: 标签的内边距。控制标签内容与边框之间的距离。
  - 为什么需要这个属性：调整标签的视觉紧凑度和舒适度
  - 可能的值：预定义的尺寸字符串，如 "xs"、"s"、"m"、"l"、"xl" 等
  - 设计考量：合适的内边距可以提升标签的可读性和美观度

#### boxRadius
- **类型**: `AspectSize | "none"`
- **默认值**: "s" 
- **说明**: 标签的圆角大小。控制标签边角的圆润程度。
  - 为什么需要这个属性：适应不同的设计风格和视觉需求
  - 可能的值：
    - 预定义的尺寸字符串，如 "xs"、"s"、"m"、"l"、"xl" 等
    - "none"：表示没有圆角，显示为直角
  - 设计考量：圆角可以使界面看起来更柔和、更现代化

#### showBorder
- **类型**: `boolean`
- **默认值**: - 
- **说明**: 是否显示边框。控制标签是否有可见的边框线。
  - 为什么需要这个属性：增强标签的视觉边界感或融入背景
  - 可能的值：true 或 false
  - 设计考量：在复杂背景下，边框可以帮助标签内容更清晰地呈现

#### align
- **类型**: `CssAlignment`
- **默认值**: - 
- **说明**: 文本对齐方式。控制标签内部文本的水平对齐方式。
  - 为什么需要这个属性：适应不同的文本布局需求
  - 可能的值：标准的 CSS 对齐值，如 "left"、"center"、"right"、"justify" 等
  - 使用场景：当标签宽度固定且内容较短时，可能需要调整对齐方式

#### type
- **类型**: `LogicType`
- **默认值**: - 
- **说明**: 逻辑类型，影响标签的颜色。用于根据业务逻辑显示不同的视觉样式。
  - 为什么需要这个属性：通过颜色传达语义信息，如状态、重要性等
  - 可能的值：预定义的逻辑类型，如 "primary"、"success"、"warning"、"danger"、"info" 等
  - 设计考量：不同类型对应不同的颜色方案，符合用户的直觉理解

#### colorMode
- **类型**: `BoxColorMode`
- **默认值**: "text" 
- **说明**: 颜色模式，控制颜色应用的方式。
  - 为什么需要这个属性：提供灵活的颜色应用方式，适应不同的设计需求
  - 可能的值：
    - "text"：只应用文本颜色
    - "box"：应用背景颜色
  - 与 type 属性的关系：type 定义了颜色的语义，colorMode 定义了颜色的应用范围

#### width
- **类型**: `string`
- **默认值**: - 
- **说明**: 标签的宽度。控制标签的显示宽度。
  - 为什么需要这个属性：在需要固定尺寸的布局中精确控制标签大小
  - 可能的值：任何有效的 CSS 宽度值，如 "100px"、"20%"、"auto" 等
  - 与 nowrap 属性的关系：当设置了固定宽度并启用 nowrap 时，文本可能会被截断

#### valuePartStyle
- **类型**: `Vars`
- **默认值**: - 
- **说明**: 值部分的自定义样式。允许为标签的值部分应用额外的 CSS 样式。
  - 为什么需要这个属性：提供更精细的样式控制，满足特殊的视觉需求
  - 可能的值：包含 CSS 样式属性的对象
  - 使用场景：当需要为标签文本应用不同于标签本身的特殊样式时

### 前缀图标属性

#### autoPrefixIcon
- **类型**: `boolean`
- **默认值**: - 
- **说明**: 开启后，如果定义了字典且 mustInOptions 为 true，将自动根据选项设置前缀图标。
  - 为什么需要这个属性：简化图标配置，根据数据自动应用合适的图标
  - 可能的值：true 或 false
  - 依赖条件：需要同时配置 dict 属性并设置 mustInOptions 为 true
  - 工作原理：会根据字典数据中的图标配置自动应用到前缀位置

#### prefixIcon
- **类型**: `IconInput | null`
- **默认值**: - 
- **说明**: 前缀图标。显示在标签文本左侧的图标。
  - 为什么需要这个属性：通过图标增强标签的视觉表达和信息传达
  - 可能的值：图标名称字符串或 null（不显示图标）
  - 设计考量：合适的图标可以提高用户对标签内容的理解速度

#### prefixHoverIcon
- **类型**: `IconInput | null`
- **默认值**: - 
- **说明**: 鼠标悬停时的前缀图标。当鼠标悬停在标签上时显示的替换图标。
  - 为什么需要这个属性：提供动态的视觉反馈，增强交互体验
  - 可能的值：图标名称字符串或 null（不替换）
  - 使用场景：当需要在鼠标悬停时提示可交互性或状态变化时

#### prefixIconFor
- **类型**: `LabelIconFor`
- **默认值**: - 
- **说明**: 前缀图标的功能类型，定义图标的行为。
  - 为什么需要这个属性：为图标赋予特定的交互功能，而不仅仅是装饰
  - 可能的值：
    - 'clear'：点击清除标签的值
    - 'copy'：点击复制标签的显示文本
    - 'copy-raw'：点击复制标签的原始值
    - 'click'：触发自定义点击事件
    - 自定义函数：执行自定义逻辑
  - 与其他属性的关系：如果设置了功能类型，图标会自动获得相应的交互行为

### 后缀图标属性

#### suffixIcon
- **类型**: `IconInput | null`
- **默认值**: - 
- **说明**: 后缀图标。显示在标签文本右侧的图标。
  - 为什么需要这个属性：通过图标增强标签的视觉表达和功能指示
  - 可能的值：图标名称字符串或 null（不显示图标）
  - 常见用途：用于指示复制、清除等操作功能

#### suffixHoverIcon
- **类型**: `IconInput | null`
- **默认值**: - 
- **说明**: 鼠标悬停时的后缀图标。当鼠标悬停在标签上时显示的替换图标。
  - 为什么需要这个属性：提供动态的视觉反馈，增强交互体验
  - 可能的值：图标名称字符串或 null（不替换）
  - 使用场景：当需要在鼠标悬停时提示可交互性或状态变化时

#### suffixIconFor
- **类型**: `LabelIconFor`
- **默认值**: - 
- **说明**: 后缀图标的功能类型，定义图标的行为。
  - 为什么需要这个属性：为图标赋予特定的交互功能，而不仅仅是装饰
  - 可能的值：
    - 'clear'：点击清除标签的值
    - 'copy'：点击复制标签的显示文本
    - 'copy-raw'：点击复制标签的原始值
    - 'click'：触发自定义点击事件
    - 自定义函数：执行自定义逻辑
  - 与其他属性的关系：如果设置了功能类型，图标会自动获得相应的交互行为

### 点击复制属性

#### clickForCopy
- **类型**: `string | [string, string]`
- **默认值**: ["ctrl", "ctrl+shift"] 
- **说明**: 点击复制功能的修饰键组合。
  - 为什么需要这个属性：允许用户通过简单的点击操作复制标签内容，提升效率
  - 可能的值：
    - 单字符串：如 "ctrl"，表示按下 Ctrl 键并点击时复制显示文本
    - 双字符串数组：如 ["ctrl", "ctrl+shift"]，第一个元素表示复制显示文本的组合键，第二个元素表示复制原始值的组合键
  - 支持的修饰键：ctrl、alt、shift、meta（Windows 键或 Command 键）
  - 交互反馈：复制成功后会有视觉提示

### 数据处理属性

#### dict
- **类型**: `TiDict | DictOpt`
- **默认值**: - 
- **说明**: 字典数据配置，用于将值映射为显示文本。
  - 为什么需要这个属性：实现数据的语义化显示，将代码值转换为用户可读的文本
  - 可能的值：字典对象或字典配置选项
  - 工作原理：根据当前的 value 在字典中查找对应的显示文本
  - 使用场景：状态码、枚举值等需要转换为可读文本的场景

#### getDisplayText
- **类型**: `(item: OptionItem) => string`
- **默认值**: - 
- **说明**: 获取显示文本的自定义函数。允许自定义如何从字典项中提取显示文本。
  - 为什么需要这个属性：提供更灵活的文本提取逻辑，适应复杂的数据结构
  - 可能的值：接收字典项并返回字符串的函数
  - 使用场景：当字典项的结构复杂或需要特殊处理文本格式时

#### placeholder
- **类型**: `string`
- **默认值**: - 
- **说明**: 占位文本，当值为空时显示的替代文本。
  - 为什么需要这个属性：在没有数据时提供友好的提示，避免显示空白
  - 可能的值：任何字符串文本
  - 显示条件：当 value 为 null、undefined 或空字符串时显示

#### valuePipe
- **类型**: `(value: any) => any`
- **默认值**: - 
- **说明**: 值处理管道函数，用于在显示前对值进行转换处理。
  - 为什么需要这个属性：提供数据转换的灵活机制，适应各种数据处理需求
  - 可能的值：接收原始值并返回处理后值的函数
  - 使用场景：数据格式化、单位转换、特殊字符处理等

## 3. 控件emit的事件

### change
- **触发条件**: 当清除图标被点击时
- **回调参数**: `payload: any`
- **说明**: 值变化事件，清除时 payload 为 null。
  - 使用场景：当需要响应用户清除标签值的操作时
  - 注意事项：该事件仅在使用清除图标功能时才会触发

### click-prefix-icon
- **触发条件**: 当前缀图标被点击且 iconFor 为 'click' 时
- **回调参数**: `api: LabelApi`
- **说明**: 点击前缀图标事件。
  - 使用场景：当需要为前缀图标定义自定义点击行为时
  - 参数说明：api 参数提供对控件方法的访问，可以用于操作控件状态

### click-suffix-icon
- **触发条件**: 当后缀图标被点击且 iconFor 为 'click' 时
- **回调参数**: `api: LabelApi`
- **说明**: 点击后缀图标事件。
  - 使用场景：当需要为后缀图标定义自定义点击行为时
  - 参数说明：api 参数提供对控件方法的访问，可以用于操作控件状态

## 4. 控件暴露的方法

通过 LabelApi 暴露的方法：

### updateDisplay
- **返回类型**: `Promise<void>`
- **参数**: - 
- **说明**: 更新标签的显示内容，通常由内部自动调用。
  - 使用场景：当外部数据源发生变化但未触发响应式更新时，可以手动调用此方法
  - 执行效果：重新计算并更新标签的显示文本、图标等内容

### getElement
- **返回类型**: `HTMLElement`
- **参数**: - 
- **说明**: 获取标签的 DOM 元素。
  - 使用场景：需要直接操作标签 DOM 元素的场景，如添加自定义样式、获取尺寸等
  - 返回值：标签对应的 HTML 元素

## 5. 控件的调用样例

### 5.1 JSON 配置版本

```json
{
  "component": "TiLabel",
  "props": {
    "value": "user@example.com",
    "tip": "用户邮箱",
    "boxRadius": "m",
    "boxPadding": "m",
    "type": "primary",
    "suffixIconFor": "copy",
    "clickForCopy": "ctrl"
  }
}
```

### 5.2 带字典数据的JSON配置

```json
{
  "component": "TiLabel",
  "props": {
    "value": "1",
    "dict": {
      "data": [
        { "value": "1", "label": "启用" },
        { "value": "0", "label": "禁用" }
      ]
    },
    "autoPrefixIcon": true,
    "boxFontSize": "m",
    "showBorder": true
  }
}
```

### 5.3 超链接版本

```json
{
  "component": "TiLabel",
  "props": {
    "value": "github",
    "href": "https://github.com/{value}",
    "type": "link"
  }
}
```

### 5.4 `<template>` 直接嵌入版本

```vue
<template>
  <div class="label-demo">
    <!-- 基础用法 -->
    <TiLabel :value="'Hello World'" />
    
    <!-- 带样式的标签 -->
    <TiLabel 
      :value="userStatus"
      :type="statusType"
      :boxRadius="'m'"
      :boxPadding="'m'"
      :showBorder="true"
    />
    
    <!-- 带图标和交互的标签 -->
    <TiLabel 
      :value="userEmail"
      tip="点击复制邮箱"
      :suffixIconFor="'copy'"
      :prefixIcon="'zmdi-email'"
    />
    
    <!-- 超链接标签 -->
    <TiLabel 
      :value="'官方文档'"
      href="https://example.com/docs"
    />
    
    <!-- 带点击复制功能的标签 -->
    <TiLabel 
      :value="sensitiveInfo"
      :clickForCopy="'ctrl'"
      :tip="'Ctrl+点击复制'"
    />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import { TiLabel } from 'tijs';

// 示例数据
const userStatus = ref('active');
const statusType = ref('success');
const userEmail = ref('admin@example.com');
const sensitiveInfo = ref('API_KEY_123456');
</script>
```

### 5.5 复杂数据处理版本

```json
{
  "component": "TiLabel",
  "props": {
    "value": "2023-10-15T10:30:00Z",
    "tip": "创建时间",
    "valuePipe": "(val) => new Date(val).toLocaleString('zh-CN')",
    "boxRadius": "s",
    "type": "info",
    "nowrap": false
  }
}
```